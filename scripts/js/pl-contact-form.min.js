var pl;!function(t){var e=function(){function e(e,n){if(void 0===n&&(n={}),this._letCloseWindow=!0,this._req=new XMLHttpRequest,this._settings={},!(e instanceof HTMLElement))throw"Template is not an HTMLElement";var i={url:"process-ajax.php",useAjax:!0};this._form=e,this._inputs=this.getInputs(),this._settings=t.Util.extendsDefaults(i,n),this.initializeEvents()}return e.prototype.ajaxRequest=function(t){var e=this._settings,n="data="+JSON.stringify(t);this.onSending(),this._req.open("POST",e.url,!0),this._req.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._req.send(n)},e.prototype.beforeUnload=function(){if(!this._letCloseWindow)return"Sending message"},e.prototype.changed=function(t){var e=t.which||t.keyCode||0;if(!this.isInvalidKey(e)){var n=t.target;this.toggleInputError(n)}},e.prototype.disableForm=function(){var e=this;this._disabled?t.Util.addClass(this._form,"disabled"):t.Util.removeClass(this._form,"disabled"),[].forEach.call(this._inputs,function(t){t.disabled=e._disabled})},e.prototype.handleReadyStateChange=function(t){4===this._req.readyState&&(200===this._req.status?this.onSuccess(this._req.responseText,this._req.status,this._req.statusText):this.onError(this._req.status,this._req.statusText))},e.prototype.initializeEvents=function(){var t=this;this.beforeUnload=this.beforeUnload.bind(this),this.changed=this.changed.bind(this),this.submit=this.submit.bind(this),this.handleReadyStateChange=this.handleReadyStateChange.bind(this),[].forEach.call(this._inputs,function(e){"text"!==e.type&&"textarea"!==e.tagName.toLowerCase()||e.addEventListener("keyup",t.changed,!1),e.addEventListener("change",t.changed,!1)}),this._form.addEventListener("submit",this.submit,!1),window.onbeforeunload=this.beforeUnload,this._req.onreadystatechange=this.handleReadyStateChange},e.prototype.isInputValid=function(e){var n=e.dataset.validate,i=e.name,s=e.value;switch(n){case"notEmpty":return t.Validator.notEmpty(s);case"phone":return t.Validator.phone(s);case"email":return t.Validator.email(s);default:return"console"in window&&console.log("Unknown validation type: "+i),!0}},e.prototype.isInvalidKey=function(e){var n,i=[t.Key.ALT,t.Key.CAPS_LOCK,t.Key.CTRL,t.Key.DOWN_ARROW,t.Key.LEFT_ARROW,t.Key.RIGHT_ARROW,t.Key.SELECT,t.Key.SHIFT,t.Key.UP_ARROW,t.Key.TAB];for(n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},e.prototype.toggleInputError=function(e){e.type;var n=e["clue-elem"],i="";this.isInputValid(e)?(n&&(n.parentNode.removeChild(n),e["clue-elem"]=null),t.Util.removeClass(e,"invalid")):(n||(i=e.dataset.clue||"InvÃ¡lido",(n=document.createElement("span")).innerText=i,t.Util.addClass(n,"input-clue"),e["clue-elem"]=n,t.Util.insertBefore(n,e)),t.Util.addClass(e,"invalid"))},e.prototype.getFormValues=function(){var t={};return[].forEach.call(this._inputs,function(e){t[e.name]=e.value}),t},e.prototype.getInputs=function(){var t=["input[type=text]","input[type=checkbox]","input[type=radio]","select","textarea"];return this._form.querySelectorAll(t.join(","))},e.prototype.isFormValid=function(){var t=this,e=!0;return[].forEach.call(this._inputs,function(n){t.isInputValid(n)||(t.toggleInputError(n),e=!1)}),e},e.prototype.reset=function(){this._form.reset()},e.prototype.submit=function(t){if(this.isFormValid()){if(this._settings.useAjax){if(this._disabled)return;t&&t.preventDefault();var e={host:location.hostname,data:this.getFormValues()};this.ajaxRequest(e)}}else t&&t.preventDefault()},e.prototype.onError=function(t,e){this._error&&this._error.fire(t,e),this.disabled=!1,this._letCloseWindow=!0},e.prototype.onSending=function(){this._sending&&this._sending.fire(),this.disabled=!0,this._letCloseWindow=!1},e.prototype.onSuccess=function(t,e,n){this._success&&this._success.fire(t,e,n),this.disabled=!1,this._letCloseWindow=!0,this.reset()},Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!==this._disabled&&(this._disabled=t,this.disableForm())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error||(this._error=new t.Event),this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sending",{get:function(){return this._sending||(this._sending=new t.Event),this._sending},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"success",{get:function(){return this._success||(this._success=new t.Event),this._success},enumerable:!0,configurable:!0}),e}();t.ContactForm=e}(pl||(pl={})),function(t){var e=function(){function t(){this._handlers=[],this._scope=this||window}return t.prototype.add=function(t){t&&this._handlers.push(t)},t.prototype.fire=function(){var t=this,e=arguments;this._handlers.forEach(function(n){n.apply(t._scope,e)})},t.prototype.remove=function(t){this._handlers=this._handlers.filter(function(e){if(e!=t)return e})},t}();t.Event=e}(pl||(pl={})),function(t){!function(t){t[t.ALT=18]="ALT",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.CTRL=17]="CTRL",t[t.DOWN_ARROW=40]="DOWN_ARROW",t[t.LEFT_ARROW=37]="LEFT_ARROW",t[t.RIGHT_ARROW=39]="RIGHT_ARROW",t[t.SELECT=93]="SELECT",t[t.SHIFT=16]="SHIFT",t[t.UP_ARROW=38]="UP_ARROW",t[t.TAB=9]="TAB"}(t.Key||(t.Key={}))}(pl||(pl={})),function(t){var e=function(){function t(){}return t.hasClass=function(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)},t.addClass=function(e,n){e.classList?e.classList.add(n):t.hasClass(e,n)||(e.className+=" "+n)},t.removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")},t.insertBefore=function(t,e){e.parentNode.insertBefore(t,e)},t.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},t.extendsDefaults=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},t}();t.Util=e}(pl||(pl={})),function(t){var e=function(){function t(){}return t.email=function(e){return!!t.isString(e)&&/[\w-\.]{3,}@([\w-]{2,}\.)*([\w-]{2,}\.)[\w-]{2,4}/.test(e)},t.hash=function(e){return!!t.isString(e)&&/^#\w*/.test(e)},t.notEmpty=function(e){return!!t.isString(e)&&!!e.length},t.phone=function(e){return!!t.isString(e)&&10===e.replace(/[^\d]/g,"").length},t.isArray=function(t){return t instanceof Array},t.isBoolean=function(t){return"boolean"==typeof t},t.isNumber=function(e){return t.toString(e)===typeof e},t.isString=function(t){return"string"==typeof t},t.toString=function(t){return new String(t).toString()},t}();t.Validator=e}(pl||(pl={}));