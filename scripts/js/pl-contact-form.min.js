var pl;!function(t){var e=function(){function e(e,n){if(void 0===n&&(n={}),this._letCloseWindow=!0,this._req=new XMLHttpRequest,this._settings={},!(e instanceof HTMLElement))throw"Template is not an HTMLFormElement";this._form=e,this._settings=t.Util.extendsDefaults({url:"process-ajax.php",useAjax:!0},n),this.initializeEvents()}return e.prototype.ajaxRequest=function(t){var e=this._settings,n="data="+JSON.stringify(t);this.onSending(),this._req.open("POST",e.url,!0),this._req.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._req.send(n)},e.prototype.beforeUnload=function(){if(!this._letCloseWindow)return"Sending message"},e.prototype.changed=function(t){var e=t.which||t.keyCode||0;if(console.log("changed.."),!this.isInvalidKey(e)){var n=t.target;this.toggleInputError(n)}},e.prototype.disableForm=function(){var e=this;this._disabled?t.Util.addClass(this.form,"disabled"):t.Util.removeClass(this.form,"disabled"),[].forEach.call(this.inputs,function(t){t.disabled=e._disabled})},e.prototype.handleReadyStateChange=function(t){4===this._req.readyState&&(200===this._req.status?this.onSuccess(this._req.responseText,this._req.status,this._req.statusText):this.onError(this._req.status,this._req.statusText))},e.prototype.initializeEvents=function(){var t=this;this.beforeUnload=this.beforeUnload.bind(this),this.changed=this.changed.bind(this),this.submit=this.submit.bind(this),this.handleReadyStateChange=this.handleReadyStateChange.bind(this),[].forEach.call(this.inputs,function(e){"text"!==e.type&&"textarea"!==e.tagName.toLowerCase()||e.addEventListener("keyup",t.changed,!1),e.addEventListener("change",t.changed,!1)}),this.form.addEventListener("submit",this.submit,!1),window.onbeforeunload=this.beforeUnload,this._req.onreadystatechange=this.handleReadyStateChange},e.prototype.isInputValid=function(e){if("string"==typeof e.dataset.validate){var n=e.dataset.validate.split("|"),i=e.name,r=e.value,s=e.type,o=!1;if("checkbox"===s);else if("radio"===s);else for(var a=0;a<n.length;a++){var u=n[a],l=void 0;try{n[a].indexOf(":")>-1?(u=n[a].slice(0,n[a].indexOf(":")),(l=n[a].slice(n[a].indexOf(":")+1).split(",")).unshift(r)):l=[r],o=t.Validator[u].apply(this,l)}catch(t){"console"in window&&console.log('Unknown "%s" validation in "%s" input',u,i)}if(!o)break}return o}return!0},e.prototype.isInvalidKey=function(e){var n,i=[t.Key.ALT,t.Key.CAPS_LOCK,t.Key.CTRL,t.Key.DOWN_ARROW,t.Key.LEFT_ARROW,t.Key.RIGHT_ARROW,t.Key.SELECT,t.Key.SHIFT,t.Key.UP_ARROW,t.Key.TAB];for(n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},e.prototype.toggleInputError=function(e){e.type;var n=e.parentNode,i=t.Util.hasClass(n,"input-container"),r=e["clue-elem"],s="";this.isInputValid(e)?(r&&(r.parentNode.removeChild(r),e["clue-elem"]=null),t.Util.removeClass(e,"invalid"),i&&t.Util.removeClass(n,"invalid")):(r||(s=e.dataset.clue||"InvÃ¡lido",(r=document.createElement("span")).innerText=s,t.Util.addClass(r,"input-clue"),e["clue-elem"]=r,t.Util.insertBefore(r,e),this.onInputError(e,s)),t.Util.addClass(e,"invalid"),i&&t.Util.addClass(n,"invalid"))},e.prototype.getFormValues=function(){var t={};return[].forEach.call(this.inputs,function(e){t[e.name]=e.value}),t},e.prototype.isFormValid=function(){var t=this,e=!0;return[].forEach.call(this.inputs,function(n){t.toggleInputError(n),t.isInputValid(n)||(e=!1)}),e},e.prototype.reset=function(){this.form.reset()},e.prototype.submit=function(t){if(this.isFormValid()){if(this._settings.useAjax){if(this._disabled)return;t&&t.preventDefault();var e={host:location.hostname,data:this.getFormValues()};this.ajaxRequest(e)}}else t&&t.preventDefault()},e.prototype.onError=function(t,e){this._error&&this._error.fire(t,e),this.disabled=!1,this._letCloseWindow=!0},e.prototype.onInputError=function(t,e){this._inputError&&this._inputError.fire(t,e)},e.prototype.onSending=function(){this._sending&&this._sending.fire(),this.disabled=!0,this._letCloseWindow=!1},e.prototype.onSuccess=function(t,e,n){this._success&&this._success.fire(t,e,n),this.disabled=!1,this._letCloseWindow=!0,1===parseInt(t)&&this.reset()},Object.defineProperty(e.prototype,"error",{get:function(){return this._error||(this._error=new t.Event),this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputError",{get:function(){return this._inputError||(this._inputError=new t.Event),this._inputError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sending",{get:function(){return this._sending||(this._sending=new t.Event),this._sending},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"success",{get:function(){return this._success||(this._success=new t.Event),this._success},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!==this._disabled&&(this._disabled=t,this.disableForm())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){if(!this._inputs){this._inputs=this._form.querySelectorAll(["input[type=text]","input[type=checkbox]","input[type=radio]","select","textarea"].join(","))}return this._inputs},enumerable:!0,configurable:!0}),e}();t.ContactForm=e}(pl||(pl={})),function(t){var e=function(){function t(){this._handlers=[],this._scope=this||window}return t.prototype.add=function(t){t&&this._handlers.push(t)},t.prototype.fire=function(){var t=this,e=arguments;this._handlers.forEach(function(n){n.apply(t._scope,e)})},t.prototype.remove=function(t){this._handlers=this._handlers.filter(function(e){if(e!=t)return e})},t}();t.Event=e}(pl||(pl={})),function(t){var e;(e=t.Key||(t.Key={}))[e.ALT=18]="ALT",e[e.CAPS_LOCK=20]="CAPS_LOCK",e[e.CTRL=17]="CTRL",e[e.DOWN_ARROW=40]="DOWN_ARROW",e[e.LEFT_ARROW=37]="LEFT_ARROW",e[e.RIGHT_ARROW=39]="RIGHT_ARROW",e[e.SELECT=93]="SELECT",e[e.SHIFT=16]="SHIFT",e[e.UP_ARROW=38]="UP_ARROW",e[e.TAB=9]="TAB"}(pl||(pl={})),function(t){var e=function(){function t(){}return t.hasClass=function(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)},t.addClass=function(e,n){e.classList?e.classList.add(n):t.hasClass(e,n)||(e.className+=" "+n)},t.removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")},t.insertBefore=function(t,e){e.parentNode.insertBefore(t,e)},t.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},t.extendsDefaults=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},t}();t.Util=e}(pl||(pl={})),function(t){var e=function(){function t(){}return t.count=function(e,n){var i=t.toString(e);return"undefined"!==i&&"null"!==i&&"NaN"!==i&&"Infinity"!==i&&i.length===n},t.creditCardNumber=function(e){return!!t.isString(e)&&/^(\d{4}-?){3}\d{4}$/.test(e)},t.date=function(e){if(!t.isString(e))return!1;if(!/^\d{1,2}\/|-\d{1,2}\/|-\d{4}$/.test(e))return!1;var n=e.split(/\/|-/),i=parseInt(n[0],10),r=parseInt(n[1],10),s=parseInt(n[2],10);if(s<1e3||s>3e3||0==r||r>12)return!1;var o=[31,28,31,30,31,30,31,31,30,31,30,31];return(s%400==0||s%100!=0&&s%4==0)&&(o[1]=29),i>0&&i<=o[r-1]},t.datetime=function(t){throw"Not implemented yet"},t.email=function(e){return!!t.isString(e)&&/[\w-\.]{3,}@([\w-]{2,}\.)*([\w-]{2,}\.)[\w-]{2,4}/.test(e)},t.equality=function(e,n){return!(!t.isString(e)&&!t.isString(n))&&e===n},t.hash=function(e){return t.isString(e),!1},t.notEmpty=function(e){return!!t.isString(e)&&!!e.length},t.phone=function(e){return!!t.isString(e)&&10===e.replace(/[^\d]/g,"").length},t.range=function(e,n,i){var r=t.toString(e);return"undefined"!==r&&"null"!==r&&"NaN"!==r&&"Infinity"!==r&&(n=t.toInteger(n),"number"!=typeof(i=t.toInteger(i))||isNaN(i)?r.length>=n:r.length>=n&&r.length<=i)},t.url=function(e){return!!t.isString(e)&&/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},t.isArray=function(t){return t instanceof Array},t.isBoolean=function(t){return"boolean"==typeof t},t.isNumber=function(t){return"number"==typeof t},t.isString=function(t){return"string"==typeof t},t.toFloat=function(t){return parseFloat(t)},t.toInteger=function(t){return parseInt(t)},t.toString=function(t){return String(t)},t}();t.Validator=e}(pl||(pl={}));