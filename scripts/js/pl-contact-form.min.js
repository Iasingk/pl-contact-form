var pl;!function(t){var e=function(){function e(e,n){if(void 0===n&&(n={}),this._letCloseWindow=!0,this._req=new XMLHttpRequest,this._settings={},!(e instanceof HTMLElement))throw"Template is not an HTMLFormElement";var i={url:"process-ajax.php",useAjax:!0,inputSelectors:["input[type=text]","select","textarea"]};this._element=e,this._settings=t.Util.extendsDefaults(i,n),this.initializeEvents()}return e.prototype.ajaxRequest=function(t){var e=this._settings,n="data="+JSON.stringify(t);this.onSending(),this._req.open("POST",e.url,!0),this._req.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this._req.send(n)},e.prototype.beforeUnload=function(){if(!this._letCloseWindow)return"Sending message"},e.prototype.disableForm=function(){var e=this;this._disabled?t.Util.addClass(this.element,"disabled"):t.Util.removeClass(this.element,"disabled"),[].forEach.call(this.inputs,function(t){t.disabled=e._disabled})},e.prototype.getInputContainer=function(e,n){for(var i=e;i=i.parentNode;)if(i instanceof HTMLElement){if(n&&t.Util.hasClass(i,"input-container"))break;if(!n&&(t.Util.hasClass(i,"input-group")||"fieldset"===i.tagName.toLowerCase()))break}return i},e.prototype.handleChange=function(t){if(!this.isInvalidKey(t.which||t.keyCode||0)){var e=t.target;this.validate(e)}},e.prototype.handleReadyStateChange=function(t){4===this._req.readyState&&(200===this._req.status?this.onSuccess(this._req.responseText,this._req.status,this._req.statusText):this.onError(this._req.status,this._req.statusText))},e.prototype.initializeEvents=function(){var t=this;this.beforeUnload=this.beforeUnload.bind(this),this.handleChange=this.handleChange.bind(this),this.submit=this.submit.bind(this),this.handleReadyStateChange=this.handleReadyStateChange.bind(this),[].forEach.call(this.inputs,function(e){"text"!==e.type&&"textarea"!==e.tagName.toLowerCase()||e.addEventListener("keyup",t.handleChange,!1),e.addEventListener("change",t.handleChange,!1)}),this.element.addEventListener("submit",this.submit,!1),window.onbeforeunload=this.beforeUnload,this._req.onreadystatechange=this.handleReadyStateChange},e.prototype.isInvalidKey=function(e){var n,i=[t.Key.ALT,t.Key.CAPS_LOCK,t.Key.CTRL,t.Key.DOWN_ARROW,t.Key.LEFT_ARROW,t.Key.RIGHT_ARROW,t.Key.SELECT,t.Key.SHIFT,t.Key.UP_ARROW,t.Key.TAB];for(n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},e.prototype.isCheckboxValid=function(t){var e=t.name,n=!1;return this.checkboxes[e].forEach(function(t){t.checked&&(n=!0)}),n},e.prototype.isRadioValid=function(t){var e=t.name,n=!1;return this.radios[e].forEach(function(t){t.checked&&(n=!0)}),n},e.prototype.isTextValid=function(e){if("string"==typeof e.dataset.validate){for(var n=e.dataset.validate.split("|"),i=e.name,r=e.value,s=!1,o=this,a=0;a<n.length&&"break"!==function(e){var a,u=n[e],l=[];l.push(r);try{if(n[e].indexOf(":")>-1)if(u=n[e].slice(0,n[e].indexOf(":")),a=n[e].slice(n[e].indexOf(":")+1),"equality"===u){var c=o.texts.filter(function(t){return t.name===a});l.push(c[0].value)}else l=l.concat(a.split(","));s=t.Validator[u].apply(o,l)}catch(t){"console"in window&&console.log('Unknown "%s" validation in "%s" input',u,i)}if(!s)return"break"}(a);a++);return s}return!0},e.prototype.toggleInputError=function(e,n){var i=e.type,r=e["clue-elem"],s="",o="checkbox"!==i&&"radio"!==i,a=this.getInputContainer(e,o);n?(r&&(r.parentNode.removeChild(r),e["clue-elem"]=null),t.Util.removeClass(e,"invalid"),a&&t.Util.removeClass(a,"invalid")):(r||(s=e.dataset.clue||"Invalid",(r=document.createElement("span")).innerText=s,t.Util.addClass(r,"input-clue"),e["clue-elem"]=r,t.Util.insertBefore(r,e)),t.Util.addClass(e,"invalid"),a&&t.Util.addClass(a,"invalid"))},e.prototype.validate=function(t){var e,n=this,i=t.type,r=t.name;return"checkbox"===i?(e=this.isCheckboxValid(t),this.checkboxes[r].forEach(function(t){n.toggleInputError(t,e)})):"radio"===i?(e=this.isRadioValid(t),this.radios[r].forEach(function(t){n.toggleInputError(t,e)})):(e=this.isTextValid(t),this.toggleInputError(t,e)),e||this.onInputError(t),e},e.prototype.getFormValues=function(){var t,e,n={};return[].forEach.call(this.inputs,function(i){t=i.name,"checkbox"===(e=i.type)&&i.checked&&("string"==typeof n[t]?n[t]+=", "+i.value:n[t]=i.value),"radio"===e&&i.checked&&(n[t]=i.value),"text"!==e&&"hidden"!==e&&"textarea"!==i.tagName.toLowerCase()||(n[t]=i.value)}),n},e.prototype.isFormValid=function(){var t,e,n=this,i=!0;for(t in this.checkboxes)e=this.checkboxes[t][0],this.validate(e)||(i=!1);for(t in this.radios)e=this.radios[t][0],this.validate(e)||(i=!1);return this.texts.forEach(function(t){n.validate(t)||(i=!1)}),i},e.prototype.reset=function(){this.element.reset()},e.prototype.submit=function(t){if(this.isFormValid()){if(this._settings.useAjax){if(this._disabled)return;t&&t.preventDefault();var e={host:location.hostname,data:this.getFormValues()};this.ajaxRequest(e)}}else t&&t.preventDefault()},e.prototype.onError=function(t,e){this._error&&this._error.fire(t,e),this.disabled=!1,this._letCloseWindow=!0},e.prototype.onInputError=function(t){this._inputError&&this._inputError.fire(t)},e.prototype.onSending=function(){this._sending&&this._sending.fire(),this.disabled=!0,this._letCloseWindow=!1},e.prototype.onSuccess=function(t,e,n){this._success&&this._success.fire(t,e,n),this.disabled=!1,this._letCloseWindow=!0;var i=parseInt(t);isNaN(i)||1!==i||this.reset()},Object.defineProperty(e.prototype,"error",{get:function(){return this._error||(this._error=new t.PLEvent),this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputError",{get:function(){return this._inputError||(this._inputError=new t.PLEvent),this._inputError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sending",{get:function(){return this._sending||(this._sending=new t.PLEvent),this._sending},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"success",{get:function(){return this._success||(this._success=new t.PLEvent),this._success},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!==this._disabled&&(this._disabled=t,this.disableForm())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){if(!this._inputs){var t=this._settings.inputSelectors;this._inputs=this._element.querySelectorAll(t.join(","))}return this._inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkboxes",{get:function(){var t=this;return this._checkboxes||(this._checkboxes={},[].forEach.call(this.inputs,function(e){"checkbox"===e.type&&(t._checkboxes.hasOwnProperty(e.name)||(t._checkboxes[e.name]=[]),t._checkboxes[e.name].push(e))})),this._checkboxes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"radios",{get:function(){var t=this;return this._radios||(this._radios={},[].forEach.call(this.inputs,function(e){"radio"===e.type&&(t._radios.hasOwnProperty(e.name)||(t._radios[e.name]=[]),t._radios[e.name].push(e))})),this._radios},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"texts",{get:function(){var t=this;return this._texts||(this._texts=[],[].forEach.call(this.inputs,function(e){"text"!==e.type&&"hidden"!==e.type&&"textarea"!==e.tagName.toLowerCase()||t._texts.push(e)})),this._texts},enumerable:!0,configurable:!0}),e}();t.ContactForm=e}(pl||(pl={})),function(t){!function(t){t[t.ALT=18]="ALT",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.CTRL=17]="CTRL",t[t.DOWN_ARROW=40]="DOWN_ARROW",t[t.LEFT_ARROW=37]="LEFT_ARROW",t[t.RIGHT_ARROW=39]="RIGHT_ARROW",t[t.SELECT=93]="SELECT",t[t.SHIFT=16]="SHIFT",t[t.UP_ARROW=38]="UP_ARROW",t[t.TAB=9]="TAB"}(t.Key||(t.Key={}))}(pl||(pl={})),function(t){var e=function(){function t(){this._handlers=[],this._scope=this||window}return t.prototype.add=function(t){t&&this._handlers.push(t)},t.prototype.fire=function(){var t=this,e=arguments;this._handlers.forEach(function(n){n.apply(t._scope,e)})},t.prototype.remove=function(t){this._handlers=this._handlers.filter(function(e){if(e!=t)return e})},t}();t.PLEvent=e}(pl||(pl={})),function(t){var e=function(){function t(){}return t.hasClass=function(t,e){return t.classList?t.classList.contains(e):new RegExp("\\b"+e+"\\b").test(t.className)},t.addClass=function(e,n){e.classList?e.classList.add(n):t.hasClass(e,n)||(e.className+=" "+n)},t.removeClass=function(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("\\b"+e+"\\b","g"),"")},t.insertBefore=function(t,e){e.parentNode.insertBefore(t,e)},t.insertAfter=function(t,e){e.parentNode.insertBefore(t,e.nextSibling)},t.extendsDefaults=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},t}();t.Util=e}(pl||(pl={})),function(t){var e=function(){function t(){}return t.count=function(e,n){var i=t.toString(e);return"undefined"!==i&&"null"!==i&&"NaN"!==i&&"Infinity"!==i&&i.length===n},t.creditCardNumber=function(e){return!!t.isString(e)&&/^(\d{4}-?){3}\d{4}$/.test(e)},t.date=function(e){if(!t.isString(e))return!1;if(!/^\d{1,2}\/|-\d{1,2}\/|-\d{4}$/.test(e))return!1;var n=e.split(/\/|-/),i=parseInt(n[0],10),r=parseInt(n[1],10),s=parseInt(n[2],10);if(s<1e3||s>3e3||0==r||r>12)return!1;var o=[31,28,31,30,31,30,31,31,30,31,30,31];return(s%400==0||s%100!=0&&s%4==0)&&(o[1]=29),i>0&&i<=o[r-1]},t.datetime=function(t){throw"Not implemented yet"},t.email=function(e){return!!t.isString(e)&&/[\w-\.]{3,}@([\w-]{2,}\.)*([\w-]{2,}\.)[\w-]{2,4}/.test(e)},t.equality=function(e,n){return!(!t.isString(e)&&!t.isString(n))&&e===n},t.hash=function(e){return!!t.isString(e)&&/^#\w*/.test(e)},t.notEmpty=function(e){return!!t.isString(e)&&!!e.length},t.phone=function(e){return!!t.isString(e)&&10===e.replace(/[^\d]/g,"").length},t.range=function(e,n,i){var r=t.toString(e);return"undefined"!==r&&"null"!==r&&"NaN"!==r&&"Infinity"!==r&&(n=t.toInteger(n),"number"!=typeof(i=t.toInteger(i))||isNaN(i)?r.length>=n:r.length>=n&&r.length<=i)},t.url=function(e){return!!t.isString(e)&&/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)},t.isArray=function(t){return t instanceof Array},t.isBoolean=function(t){return"boolean"==typeof t},t.isNumber=function(t){return"number"==typeof t},t.isString=function(t){return"string"==typeof t},t.toFloat=function(t){return parseFloat(t)},t.toInteger=function(t){return parseInt(t)},t.toString=function(t){return String(t)},t}();t.Validator=e}(pl||(pl={}));